<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<link rel="stylesheet" href="css/bootstrap.min.css" type='text/css' />
	<link rel="stylesheet" href="css/bootstrap-theme.min.css"
		type='text/css' />
		
	<h:outputScript library="primefaces" name="jquery/jquery.js" target="head" />
	<h:outputScript library="primefaces" name="jquery/jquery-plugins.js" target="head" />
	<script type="text/javascript" src="js/bootstrap.min.js"></script>
</h:head>
<h:body>
	<p:spacer height="10" />
	<div class="row-fluid">
		<div class="col-xs-1 col-sm-1 col-md-1 col-lg-1">
			<p:spacer height="250" />
			<p:growl id="messages" showDetail="true" />
		</div>
		<div class="col-xs-10 col-sm-10 col-md-10 col-lg-10">
			<div class="col-xs-12 col-md-12 col-lg-12">
				<div class="panel panel-default">
					<div class="panel-body">
						<h:form id="formInsertar" class="form-group">
							<fieldset>
								<legend>Registrar Usuario</legend>
								<div class="form-group col-xs-12 col-sm-12 col-md-12 col-lg-12">
									<div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
										<span class="glyphicon glyphicon-record">&nbsp;</span>
										<p:outputLabel for="txnombreUsuario" value="Nombre de Usuario" />
										<p:inputText value="#{usuarioBean.tusuario.nombre}"
											id="txnombreUsuario" placeholder="Ejm: Deyviz"
											required="true" requiredMessage="El Nombres es obligatorio"
											style="text-transform: uppercase;" styleClass="form-control"
											property="txnombreUsuario" />
									</div>
									<div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
										<span class="glyphicon glyphicon-record">&nbsp;</span>
										<p:outputLabel for="txApellidoPaterno"
											value="Apellido Paterno:" />
										<p:inputText value="#{usuarioBean.tusuario.apellidoPaterno}"
											id="txApellidoPaterno" placeholder="Ejm: Perez"
											required="true"
											requiredMessage="El Apellido Paterno es obligatorio"
											style="text-transform: uppercase;" styleClass="form-control"
											property="txApellidoPaterno" />
									</div>
									<div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
										<span class="glyphicon glyphicon-record">&nbsp;</span>
										<p:outputLabel for="txApellidoMaterno"
											value="Apellido Materno:" />
										<p:inputText value="#{usuarioBean.tusuario.apellidoMaterno}"
											id="txApellidoMaterno" placeholder="Ejm: Chavez"
											required="true"
											requiredMessage="El Apellido Materno es obligatorio"
											style="text-transform: uppercase;" styleClass="form-control"
											property="txApellidoMaterno" />
									</div>
								</div>
								<div class="form-group col-xs-12 col-sm-12 col-md-12 col-lg-12">
									<div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
										<span class="glyphicon glyphicon-user">&nbsp;</span>
										<p:outputLabel for="txtUsuario" value="Usuario" />
										<p:inputText value="#{usuarioBean.tusuario.nombreUsuario}"
											id="txtUsuario" placeholder="Ejm: dperezc" required="true"
											requiredMessage="El Usuario es obligatorio"
											style="text-transform: uppercase;" styleClass="form-control"
											property="txtUsuario" />
									</div>
									<div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
										<span class="glyphicon glyphicon-briefcase">&nbsp;</span>
										<p:outputLabel for="txtClave" value="Clave: " />
										<p:password value="#{usuarioBean.tusuario.clave}"
											id="txtClave" placeholder="******" required="true"
											requiredMessage="La Clave es obligatorio"
											styleClass="form-control" property="txtClave" />
									</div>
									<div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
										<span class="glyphicon glyphicon-briefcase">&nbsp;</span>
										<p:outputLabel for="txtConfimarClave"
											value="Confirmar Clave: " />
										<p:password id="txtConfimarClave" placeholder="******"
											required="true"
											requiredMessage="La Clave de confirmacion es obligatorio"
											styleClass="form-control" property="txtConfimarClave" />
									</div>
								</div>
								<div class="form-group col-xs-12 col-sm-12 col-md-12 col-lg-12">
									<div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
										<span class="glyphicon glyphicon-envelope">&nbsp;</span>
										<p:outputLabel for="txtCorreo" value="Correo Electronico: " />
										<p:inputText value="#{usuarioBean.tusuario.correo}"
											id="txtCorreo" placeholder="Ejm: dperezc@bancomercio.com.pe"
											required="true" requiredMessage="El Correo es obligatorio"
											styleClass="form-control" property="txtCorreo" />
									</div>
									<div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
										<span class="glyphicon glyphicon-phone">&nbsp;</span>
										<p:outputLabel for="txtCelular" value="Celular: " />
										<p:inputText value="#{usuarioBean.tusuario.celular}"
											id="txtCelular" placeholder="Ejm: 944246788" required="true"
											requiredMessage="Celular es obligatorio"
											styleClass="form-control" property="txtCelular" />
									</div>
									<div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
										<span class="glyphicon glyphicon-eye-open">&nbsp;</span>
										<p:outputLabel for="txtRol" value="Rol: " />
										<p:inputText value="#{usuarioBean.tusuario.rol}" id="txtRol"
											placeholder="Ejm: Analista de Sistemas" required="true"
											requiredMessage="El Rol es obligatorio"
											style="text-transform: uppercase;" styleClass="form-control"
											property="txtRol" />
									</div>
								</div>
								<div class="row-fluid">

									<div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
										<div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
										<h:commandButton
											actionListener="#{usuarioBean.nuevoUsuario()}"
											update=":formMostrarUsuario:tablaMostrarUsuario :formInsertar"
											styleClass="form-control btn btn-danger"
											value="Registrar Usuario" />
										</div>
										<div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
										<h:commandButton styleClass="form-control btn btn-danger" value="Buscar" />
										</div>
										
									</div>
								</div>
							</fieldset>
						</h:form>
					</div>
					<fieldset style="background-color: #e9e9e9">
						<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"
							style="text-align: center;">
							<p:link value="Volver a loguearse" href="index.xhtml"></p:link>
						</div>
					</fieldset>

				</div>
			</div>
			<div class="col-xs-12 col-md-12 col-lg-12">
				<h:form id="formMostrarUsuario">
					<p:dataTable id="tablaMostrarUsuario" value="#{usuarioBean.listar}"
						selectionMode="single" rowKey="#{emp.codUsuario}"
						var="emp" emptyMessage="NO SE ENCONTRARON DATOS" rows="20"
						paginatorPosition="bottom" paginator="true" rowIndexVar="row"
						rowsPerPageTemplate="20,30,40,50"
						currentPageReportTemplate="Mostrando {startRecord}-{endRecord} de {totalRecords} usuarios"
						paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
						style="text-align:center;mar">
						<p:column style="width: 4%;margin-bottom:0;">
							<f:facet name="header">
								<p:outputLabel value="ID" />
							</f:facet>
							<h:outputText value="#{emp.codUsuario}" style="font-size: x-small;font-weight: normal" />
						</p:column>
						<p:column>
							<f:facet name="header"> 
							<p:outputLabel value="Datos Personales" />
							</f:facet>
							<p:outputLabel value="#{emp.nombre} #{emp.apellidoPaterno} #{emp.apellidoMaterno}" style="font-size: x-small;font-weight: normal" />
						</p:column>
						<p:column style="width: 8%;">
							<f:facet name="header">
								<p:outputLabel value="Usuario" />
							</f:facet>
							<p:outputLabel value="#{emp.nombreUsuario}" style="font-size: x-small;font-weight: normal" />
						</p:column>
						<p:column style="width: 8%;">
							<f:facet name="header">
								<p:outputLabel value="Clave" />
							</f:facet>
							<p:outputLabel value="#{emp.clave}" style="font-size: x-small;font-weight: normal" />
						</p:column>
						<p:column>
							<f:facet name="header">
								<p:outputLabel value="Correo" />
							</f:facet>
							<p:outputLabel value="#{emp.correo}" style="font-size: x-small;font-weight: normal" />
						</p:column>
						<p:column style="width: 7%;">
							<f:facet name="header">
								<p:outputLabel value="Celular" />
							</f:facet>
							<p:outputLabel value="#{emp.celular}" style="font-size: x-small;font-weight: normal" />
						</p:column>
						<p:column>
							<f:facet name="header">
								<p:outputLabel value="Rol" />
							</f:facet>
							<p:outputLabel value="#{emp.rol}" style="font-size: x-small;font-weight: normal" />
						</p:column>
						<p:column style="width: 10%;">
							<f:facet name="header">
								<p:outputLabel value="Eliminar" />
							</f:facet>
							<p:commandButton icon="ui-icon-closethick" style="font-size: 11px;" oncomplete="PF('dlgEliminar').show();" update=":formEliminar"> 
								<f:setPropertyActionListener target="#{usuarioBean.tusuario}" value="#{emp}" />
							</p:commandButton>
						</p:column>
						<p:column style="width: 10%;">
							<f:facet name="header">
								<p:outputLabel value="Editar" />
							</f:facet>
							<p:commandButton icon="ui-icon-pencil" style="font-size: 11px;" oncomplete="PF('dlgModificar').show();" update=":formModificar">
								<f:setPropertyActionListener target="#{usuarioBean.tusuario}" value="#{emp}" /> 
							</p:commandButton>
							
						</p:column>
						
					</p:dataTable>
				</h:form>
			</div>
			<div class="col-xs-12 col-md-12 col-lg-12">
				<p:dialog id="dlg" header="Modificar Usuario" widgetVar="dlgModificar"
					showEffect="explode" hideEffect="explode" modal="true" style="closeOnEscape">
					<h:form id="formModificar" class="form-group">
						<p:inputText value="#{usuarioBean.tusuario.codUsuario}"
							type="hidden" />
						<fieldset>
							<legend style="text-align: center;">MODIFICAR USUARIO</legend>
							<div class="form-group col-xs-12 col-sm-12 col-md-12 col-lg-12">
								<div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
									<span class="glyphicon glyphicon-record">&nbsp;</span>
									<p:outputLabel for="txnombreUsuario" value="Nombre de Usuario" />
									<p:inputText value="#{usuarioBean.tusuario.nombre}"
										id="txnombreUsuario" placeholder="Ejm: Deyviz" required="true"
										requiredMessage="El Nombres es obligatorio"
										style="text-transform: uppercase;" styleClass="form-control"
										property="txnombreUsuario" />
								</div>
								<div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
									<span class="glyphicon glyphicon-record">&nbsp;</span>
									<p:outputLabel for="txApellidoPaterno"
										value="Apellido Paterno:" />
									<p:inputText value="#{usuarioBean.tusuario.apellidoPaterno}"
										id="txApellidoPaterno" placeholder="Ejm: Perez"
										required="true"
										requiredMessage="El Apellido Paterno es obligatorio"
										style="text-transform: uppercase;" styleClass="form-control"
										property="txApellidoPaterno" />
								</div>
								<div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
									<span class="glyphicon glyphicon-record">&nbsp;</span>
									<p:outputLabel for="txApellidoMaterno"
										value="Apellido Materno:" />
									<p:inputText value="#{usuarioBean.tusuario.apellidoMaterno}"
										id="txApellidoMaterno" placeholder="Ejm: Chavez"
										required="true"
										requiredMessage="El Apellido Materno es obligatorio"
										style="text-transform: uppercase;" styleClass="form-control"
										property="txApellidoMaterno" />
								</div>
							</div>
							<div class="form-group col-xs-12 col-sm-12 col-md-12 col-lg-12">
								<div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
									<span class="glyphicon glyphicon-user">&nbsp;</span>
									<p:outputLabel for="txtUsuario" value="Usuario" />
									<p:inputText value="#{usuarioBean.tusuario.nombreUsuario}"
										id="txtUsuario" placeholder="Ejm: dperezc" required="true"
										requiredMessage="El Usuario es obligatorio"
										style="text-transform: uppercase;" styleClass="form-control"
										property="txtUsuario" />
								</div>
								<div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
									<span class="glyphicon glyphicon-briefcase">&nbsp;</span>
									<p:outputLabel for="txtClave" value="Clave: " />
									<p:inputText value="#{usuarioBean.tusuario.clave}"
										id="txtClave" required="true" type="password"
										requiredMessage="La Clave es obligatorio"
										styleClass="form-control" property="txtClave" />
								</div>
							</div>
							<div class="form-group col-xs-12 col-sm-12 col-md-12 col-lg-12">
								<div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
									<span class="glyphicon glyphicon-envelope">&nbsp;</span>
									<p:outputLabel for="txtCorreo" value="Correo Electronico: " />
									<p:inputText value="#{usuarioBean.tusuario.correo}"
										id="txtCorreo" placeholder="Ejm: dperezc@bancomercio.com.pe"
										required="true" requiredMessage="El Correo es obligatorio"
										styleClass="form-control" property="txtCorreo" />
								</div>
								<div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
									<span class="glyphicon glyphicon-phone">&nbsp;</span>
									<p:outputLabel for="txtCelular" value="Celular: " />
									<p:inputText value="#{usuarioBean.tusuario.celular}"
										id="txtCelular" placeholder="Ejm: 944246788" required="true"
										requiredMessage="Celular es obligatorio"
										styleClass="form-control" property="txtCelular" />
								</div>
								<div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
									<span class="glyphicon glyphicon-eye-open">&nbsp;</span>
									<p:outputLabel for="txtRol" value="Rol: " />
									<p:inputText value="#{usuarioBean.tusuario.rol}" id="txtRol"
										placeholder="Ejm: Analista de Sistemas" required="true"
										requiredMessage="El Rol es obligatorio"
										style="text-transform: uppercase;" styleClass="form-control"
										property="txtRol" />
								</div>
							</div>
							<p:commandButton
								actionListener="#{usuarioBean.modificarUsuario()}"
								update=":formMostrarUsuario:tablaMostrarUsuario"
								oncomplete="PF('dlgModificar').hide();" value="Guardar Cambios" />
						</fieldset>
					</h:form>
				</p:dialog>
			</div>
		</div>
		<div class="col-xs-1 col-sm-1 col-md-1 col-lg-1"></div>
	</div>
	<p:dialog id="dlg2" header="Eliminar Datos" widgetVar="dlgEliminar"
		showEffect="explode" hideEffect="explode" modal="true">

		<h:form id="formEliminar" style="font-size: 12px;">
			<p:inputText value="#{usuarioBean.tusuario.codUsuario}"
							type="hidden" />
			<p:inputText value="#{usuarioBean.tusuario.nombreUsuario}"
							type="hidden" />
			<p:inputText value="#{usuarioBean.tusuario.clave}"
							type="hidden" />
			<p:inputText value="#{usuarioBean.tusuario.nombre}"
							type="hidden" />
			<p:inputText value="#{usuarioBean.tusuario.apellidoPaterno}"
							type="hidden" />				
			<p:inputText value="#{usuarioBean.tusuario.apellidoMaterno}"
							type="hidden" />
			<p:inputText value="#{usuarioBean.tusuario.celular}"
							type="hidden" />
			<p:inputText value="#{usuarioBean.tusuario.correo}"
							type="hidden" />
			<p:inputText value="#{usuarioBean.tusuario.rol}"
							type="hidden" />
			<h:outputText value="Desea eliminar este registro?" />
			<p:commandButton value="Si"
				actionListener="#{usuarioBean.eliminarUsuario()}"
				update=":formMostrarUsuario" oncomplete="PF('dlgEliminar').hide();" />
			<p:commandButton value="No" onclick="PF('dlgEliminar').hide();" />
		</h:form>
	</p:dialog>
</h:body>
</html>